<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Air Pollution Sources in India - Graphical Representation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* CSS */
        :root {
            --primary-color: #2c3e50; /* Dark Blue-Gray */
            --secondary-color: #3498db; /* Bright Blue */
            --accent-color: #e74c3c; /* Reddish */
            --bg-color: #f4f7f6; /* Lighter Gray */
            --text-color: #333;
            --card-bg: #ffffff;
            --border-radius: 8px;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --box-shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.7; /* Increased line height for readability */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-image: linear-gradient(to right, var(--primary-color), #3e5770);
            color: white;
            padding: 2.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        header h1 {
            margin: 0;
            font-size: 2.8rem;
            font-weight: 700;
        }

        header .subtitle {
            font-size: 1.3rem;
            font-weight: 300;
            opacity: 0.9;
            margin-top: 0.5rem;
        }

        main {
            flex-grow: 1;
            padding: 2rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        .chart-container, .info-section, .impacts-section {
            background-color: var(--card-bg);
            padding: 2.5rem; /* Increased padding */
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 2.5rem; /* Increased margin */
        }

        .chart-container h2, .info-section h2, .impacts-section h2 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 2rem;
            text-align: center;
            font-size: 1.8rem;
            font-weight: 500;
        }

        .chart-controls {
            margin-bottom: 2rem;
            text-align: center;
        }

        .chart-toggle-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            margin: 0 0.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }

        .chart-toggle-btn:hover {
            background-color: #2980b9; /* Darker blue */
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .chart-toggle-btn.active {
            background-color: var(--primary-color);
            box-shadow: 0 3px 7px rgba(0,0,0,0.2);
        }


        .chart-wrapper {
            position: relative;
            height: 450px; /* Adjusted height */
            width: 100%;
            max-width: 550px; 
            margin: 0 auto;
        }

        .data-note {
            font-size: 0.9rem;
            color: #666;
            margin-top: 2rem;
            text-align: center;
            font-style: italic;
        }

        .source-cards, .impact-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Slightly larger minmax */
            gap: 2rem; /* Increased gap */
        }

        .card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 6px solid var(--secondary-color); 
        }

        .card:hover {
            transform: translateY(-7px);
            box-shadow: var(--box-shadow-hover);
        }

        .card h3 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .card p {
            font-size: 1rem;
            color: #555;
            margin-bottom: 0.8rem;
        }
        .card p:last-child {
            margin-bottom: 0;
        }
        .card p strong {
            color: var(--primary-color);
        }

        /* Specific card accents (match chart colors for consistency) */
        #card-vehicular { border-left-color: #FF6384; } 
        #card-industrial { border-left-color: #36A2EB; } 
        #card-biomass { border-left-color: #FFCE56; } 
        #card-dust { border-left-color: #4BC0C0; } 
        #card-waste { border-left-color: #9966FF; } 

        .impact-card {
            background-color: #fdfdfd; 
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border-left: 5px solid var(--accent-color);
            box-shadow: 0 3px 10px rgba(0,0,0,0.07);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .impact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        .impact-card h4 {
            color: var(--accent-color);
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
        }
        .impact-card h4 i { 
            margin-right: 0.75rem;
            font-size: 1.5rem; /* Larger icons */
        }
        .impact-card p {
            font-size: 0.95rem;
        }

        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 1.5rem;
            font-size: 0.95rem;
            margin-top: auto; 
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.2rem;
            }
            header .subtitle {
                font-size: 1.1rem;
            }
            .chart-wrapper {
                height: 350px;
            }
            .chart-container, .info-section, .impacts-section {
                padding: 1.5rem;
            }
            .chart-controls {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }
            .chart-toggle-btn {
                width: 100%;
                margin: 0;
            }
        }

        @media (max-width: 480px) {
            header h1 {
                font-size: 1.9rem;
            }
            header .subtitle {
                font-size: 1rem;
            }
            .chart-wrapper {
                height: 300px;
            }
            .card, .impact-card {
                padding: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Air Pollution in India: Major Contributing Factors</h1>
        <p class="subtitle">A dynamic visual overview of primary sources and their impacts</p>
    </header>

    <main>
        <section class="chart-container">
            <h2>Source Apportionment (Generalized National Average)</h2>
            <div class="chart-controls">
                <button id="btnDoughnut" class="chart-toggle-btn active">Doughnut Chart</button>
                <button id="btnBar" class="chart-toggle-btn">Bar Chart</button>
                <button id="btnPie" class="chart-toggle-btn">Pie Chart</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="pollutionSourcesChart"></canvas>
            </div>
            <p class="data-note">
                <strong>Disclaimer:</strong> Data presented is a generalized national average for illustrative purposes. Actual contributions vary significantly by region, season, and specific locality. For precise, up-to-date, and region-specific figures, please consult official reports from CPCB, MoEFCC, TERI, or state pollution control boards.
            </p>
        </section>

        <section class="info-section">
            <h2>Understanding the Sources</h2>
            <div class="source-cards">
                <div class="card" id="card-vehicular">
                    <h3>Vehicular Emissions</h3>
                    <p><strong>Primary Pollutants:</strong> Particulate Matter (PM2.5, PM10), Nitrogen Oxides (NOx), Carbon Monoxide (CO), Volatile Organic Compounds (VOCs), Sulphur Dioxide (SO2 from diesel).</p>
                    <p><strong>Details:</strong> Arises from the combustion of fossil fuels in cars, trucks, buses, two-wheelers, and three-wheelers. Older vehicles, poor fuel quality, inadequate maintenance, and traffic congestion exacerbate emissions. A major contributor, especially in urban areas.</p>
                </div>
                <div class="card" id="card-industrial">
                    <h3>Industrial Pollution</h3>
                    <p><strong>Primary Pollutants:</strong> Sulphur Dioxide (SO2), Nitrogen Oxides (NOx), Particulate Matter (PM), Carbon Monoxide (CO), Volatile Organic Compounds (VOCs), heavy metals.</p>
                    <p><strong>Details:</strong> Includes emissions from power plants (especially coal-fired), manufacturing industries (cement, steel, brick kilns, refineries), and small-scale industries. The type and quantity of pollutants vary widely based on the industry type and pollution control measures adopted.</p>
                </div>
                <div class="card" id="card-biomass">
                    <h3>Biomass Burning</h3>
                    <p><strong>Primary Pollutants:</strong> Particulate Matter (PM2.5, PM10), Carbon Monoxide (CO), Black Carbon, Organic Carbon, Methane (CH4), VOCs.</p>
                    <p><strong>Details:</strong> Encompasses the burning of agricultural crop residues (stubble burning), a significant seasonal issue in North India, and the household use of solid fuels like wood, dung cakes, and coal for cooking and heating, predominantly in rural and low-income urban households.</p>
                </div>
                <div class="card" id="card-dust">
                    <h3>Dust (Natural & Anthropogenic)</h3>
                    <p><strong>Primary Pollutants:</strong> Coarse Particulate Matter (PM10), Fine Particulate Matter (PM2.5).</p>
                    <p><strong>Details:</strong> Includes resuspended dust from roads due to vehicular movement, dust from construction and demolition activities, and natural wind-blown dust from arid and semi-arid regions. Poorly managed construction sites and unpaved roads are major contributors.</p>
                </div>
                <div class="card" id="card-waste">
                    <h3>Waste Burning & Other</h3>
                    <p><strong>Primary Pollutants:</strong> Dioxins, Furans, Particulate Matter (PM), Carbon Monoxide (CO), VOCs, heavy metals.</p>
                    <p><strong>Details:</strong> Open burning of municipal solid waste in landfills and residential areas due to inadequate waste management infrastructure. Also includes emissions from landfill fires, and other miscellaneous sources like diesel generators (non-industrial).</p>
                </div>
            </div>
        </section>

        <section class="impacts-section">
            <h2>Impacts of Air Pollution</h2>
            <div class="impact-cards">
                <div class="impact-card">
                    <h4><i class="fas fa-heartbeat"></i> Health Impacts</h4>
                    <p>Leads to severe respiratory diseases (asthma, bronchitis, COPD, pneumonia), cardiovascular problems (heart attacks, strokes), lung cancer, eye irritation, skin diseases, and neurological disorders. It significantly contributes to premature mortality and reduced quality of life, with children, the elderly, and those with pre-existing conditions being most vulnerable.</p>
                </div>
                <div class="impact-card">
                    <h4><i class="fas fa-leaf"></i> Environmental Impacts</h4>
                    <p>Causes acid rain, which damages soil, water bodies, and vegetation. Reduces crop yields and damages forests. Harms biodiversity and aquatic ecosystems. Leads to the formation of smog and haze, reducing visibility. Certain pollutants like black carbon and ozone are potent climate forcers, contributing to global warming.</p>
                </div>
                <div class="impact-card">
                    <h4><i class="fas fa-landmark"></i> Economic Impacts</h4>
                    <p>Results in substantial economic losses due to increased healthcare expenditures, lost workdays and productivity from illness, premature deaths, and reduced agricultural output. Damages infrastructure through corrosion (e.g., historical monuments). Can negatively impact tourism and overall economic development.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Created by KAKSH | Â© 2024 Air Quality India Insights (Conceptual Design)</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // JavaScript
        document.addEventListener('DOMContentLoaded', () => {
            let pollutionChart; // To store the chart instance
            const ctx = document.getElementById('pollutionSourcesChart').getContext('2d');

            // --- CRITICAL: UPDATE THIS DATA WITH ACCURATE, SOURCED FIGURES ---
            // This data is for ILLUSTRATIVE PURPOSES ONLY.
            const pollutionData = {
                labels: [
                    'Vehicular Emissions',       // Corresponds to #card-vehicular
                    'Industrial Pollution',      // Corresponds to #card-industrial
                    'Biomass Burning',           // Corresponds to #card-biomass
                    'Dust (Natural & Anthropogenic)', // Corresponds to #card-dust
                    'Waste Burning & Other'    // Corresponds to #card-waste
                ],
                datasets: [{
                    label: 'Contribution to Air Pollution (%)',
                    data: [28, 30, 20, 15, 7], // EXAMPLE percentages. MUST BE UPDATED!
                    backgroundColor: [ 
                        '#FF6384', // Pink/Red
                        '#36A2EB', // Blue
                        '#FFCE56', // Yellow
                        '#4BC0C0', // Teal
                        '#9966FF', // Purple
                    ],
                    borderColor: '#FFFFFF', // Single color for all borders
                    borderWidth: 2,
                    hoverOffset: 12, // Slightly more pop on hover
                    hoverBorderColor: '#DDDDDD',
                    hoverBorderWidth: 3
                }]
            };
            // --- END OF DATA TO UPDATE ---

            const baseChartOptions = {
                responsive: true,
                maintainAspectRatio: false, 
                animation: {
                    duration: 1000, // Animation duration
                    easing: 'easeInOutQuart', // Smooth animation
                    animateScale: true,
                    animateRotate: true
                },
                plugins: {
                    legend: {
                        labels: {
                            padding: 20,
                            font: {
                                size: 14,
                                family: 'Roboto, sans-serif'
                            },
                            usePointStyle: true, 
                            boxWidth: 15 // Width of the colored box/point
                        }
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(0,0,0,0.85)',
                        titleFont: {
                            size: 16,
                            weight: 'bold',
                            family: 'Roboto, sans-serif'
                        },
                        bodyFont: {
                            size: 14,
                            family: 'Roboto, sans-serif'
                        },
                        padding: 12,
                        cornerRadius: 6,
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    // For doughnut/pie, context.parsed is the value. For bar, it might be context.parsed.x or .y
                                    let value = chartConfig.type === 'bar' ? (chartConfig.options.indexAxis === 'y' ? context.parsed.x : context.parsed.y) : context.parsed;
                                    label += value + '%';
                                }
                                return label;
                            }
                        }
                    },
                    title: { 
                        display: false, 
                    }
                },
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const activeElement = elements[0];
                        const label = pollutionData.labels[activeElement.index].toLowerCase();
                        
                        let cardId = '';
                        if (label.includes('vehicular')) cardId = 'card-vehicular';
                        else if (label.includes('industrial')) cardId = 'card-industrial';
                        else if (label.includes('biomass')) cardId = 'card-biomass';
                        else if (label.includes('dust')) cardId = 'card-dust';
                        else if (label.includes('waste')) cardId = 'card-waste';
                        
                        document.querySelectorAll('.card').forEach(card => {
                            card.style.transform = 'scale(1)';
                            card.style.boxShadow = 'var(--box-shadow)';
                        }); 
                        
                        const targetCard = document.getElementById(cardId);
                        if (targetCard) {
                            targetCard.style.transform = 'scale(1.03)'; // Subtle scale
                            targetCard.style.boxShadow = 'var(--box-shadow-hover)'; 
                            targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }
                }
            };

            // Initial chart config
            let chartConfig = {
                type: 'doughnut',
                data: pollutionData,
                options: { ...baseChartOptions } // Spread base options
            };
            // Initial legend position for doughnut/pie
            chartConfig.options.plugins.legend.position = 'bottom';


            function createOrUpdateChart(newType = null) {
                if (pollutionChart) {
                    pollutionChart.destroy();
                }
                if (newType) {
                    chartConfig.type = newType;
                }

                // Clone base options and customize for specific chart type
                let currentOptions = JSON.parse(JSON.stringify(baseChartOptions)); // Deep clone

                if (chartConfig.type === 'bar') {
                    currentOptions.indexAxis = 'y'; 
                    currentOptions.scales = { 
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Contribution (%)',
                                font: { size: 14, family: 'Roboto, sans-serif' }
                            },
                            ticks: { font: { family: 'Roboto, sans-serif' } }
                        },
                        y: {
                            ticks: { 
                                autoSkip: false,
                                font: { family: 'Roboto, sans-serif' }
                            }
                        }
                    };
                    currentOptions.plugins.legend.position = 'top';
                    currentOptions.plugins.legend.align = 'center';
                } else { // Doughnut or Pie
                    delete currentOptions.indexAxis; 
                    delete currentOptions.scales;    
                    currentOptions.plugins.legend.position = 'bottom';
                    currentOptions.plugins.legend.align = 'center';
                }
                
                chartConfig.options = currentOptions;
                pollutionChart = new Chart(ctx, chartConfig);
            }

            // Initial chart creation
            createOrUpdateChart();

            // Event Listeners for chart type buttons
            const chartButtons = [
                { id: 'btnDoughnut', type: 'doughnut' },
                { id: 'btnBar', type: 'bar' },
                { id: 'btnPie', type: 'pie' }
            ];

            chartButtons.forEach(buttonInfo => {
                const btn = document.getElementById(buttonInfo.id);
                if (btn) {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.chart-toggle-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        createOrUpdateChart(buttonInfo.type);
                    });
                }
            });
        });
    </script>
</body>
</html>